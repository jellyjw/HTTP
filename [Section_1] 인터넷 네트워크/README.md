## IP (Internet Protocol)

내 PC에서 다른 PC로 ‘hello world’ 라는 메세지를 전송하고 싶다면 어떻게 해야할까? 일단 다른 PC의 주소를 알아야 메세지를 전송할수 있을 것이다.

여기서 IP는 PC의 ‘주소’ 역할을 하게 되는데, IP 프로토콜의 한계는 다음과 같다.

### IP 프로토콜의 한계

- 비연결성
  - 패킷을 받을 대상이 없거나 해당 IP주소를 가지고 있는 PC가 오프라인 상태이더라도 해당 IP 주소로 일단 메세지를 보내게 되는데, 결국 이를 확인할 수 없기때문에 전송이 되지 않을수 있다는 단점이 있다.
- 비신뢰성
  - 우리가 보내는 메세지는 여러개의 노드(서버) 를 거쳐 전송되는데, 만약 내가 보낸 패킷이 중간에 유실되거나, 보낸 패킷이 순서대로 도착하지 않을수 있다. 확실히 순서나 보착에 대한 보장을 해주지 않기 때문에 신뢰할수 없다는 한계가 있다.
- 프로그램 구분
  - 만약 한 PC에서 여러개의 앱을 이용하고 있을 경우 IP주소는 같지만 어느 서비스에 메세지를 보냈는지에 대해서 구분하기가 어렵다.

이러한 IP 프로토콜의 한계를 극복하기 위해 TCP , UDP 프로토콜이 등장했다.

---

### 인터넷 프로토콜 4계층

![image](https://github.com/jellyjw/HTTP-/assets/104891203/9f543fc6-6805-4ef1-bf21-f6ae554d913e)



네트워크 인터페이스 계층은 실제로 우리가 사용하는 랜카드 등을 의미하며, 인터넷 계층인 IP 위에 TCP, UDP 프로토콜이 존재하기 때문에 IP 위에 TCP , UDP 를 올려서 IP의 한계를 보완하고 있다고 생각하면 된다.

---

### 패킷

패킷은 패키지와 버킷의 합성어로, 우리가 보낼 메세지를 택배박스에 데이터 넣듯 해서 보내는것과 비슷하다. 전송 데이터를 IP 패킷으로 한번 감싸고 (IP 패킷에는 출발지 IP, 목적지 IP 등의 정보가 들어간다), TCP에 대한 정보도 담게 되는데 다음과 같은 정보들이 들어간다.

**TCP 정보**

- 출발지 PORT
- 목적지 PORT
- 전송 제어
- 순서
- 검증 정보

## TCP(Transmission Contro Protocol)

전송 제어 프로토콜로, TCP의 특징은 다음과 같다.

- 연결지향(3 way handshake)
  연결을 하고 나서 메세지를 보내기 때문에 IP 프로토콜의 한계였던 비연결성을 보완한다.
  - 연결지향이기 때문에 데이터가 전달되는것을 보증한다.
  - TCP 정보에 순서도 포함되기 때문에 내가 보낸 메세지의 순서를 보장한다. 만약 `1-2-3` 순서대로 보냈는데 `1-3-2` 순서로 도착했을 경우 서버쪽에서 제대로 도착한 1번 이후부터 다시 보내도록 하기 때문에, `1-2-3` 순서로 도착하게 되고 순서를 보장하게 된다.
- 신뢰할수 있는 프로토콜

![image](https://github.com/jellyjw/HTTP-/assets/104891203/e91ca590-28b7-41fd-b701-0c4cd4556401)


1. 클라이언트에서 연결해달라고 `SYN` 이라는 메세지를 보냄
2. 서버에서는 `ACK` 이라는 메세지를 보내면서, 서버도 연결해달라는 의미로 `SYN` 메세지를 보냄
3. 클라이언트에서 알겠다는 의미로 `ACK` 메세지를 보냄
4. 데이터 전송

이렇게 3단계를 거치면, 클라이언트와 서버가 서로 신뢰할수 있는 관계가 되어 데이터 전송을 시작한다. 하지만 요즘은 최적화가 돼서 3번 단계에서 `ACK` 와 함께 데이터를 전송한다고 한다.

하지만 개념적으로 연결이 된 것일뿐, 실제 물리적인 선으로 확실하게 연결된 것은 아니기때문에 이를 알아두어야 한다.

## UDP(User Datagram Protocol)

UDP는 사용자 데이터그램 프로토콜로, 다음과 같은 특징이 있다.

- 기능이 거의 없어 하얀 도화지에 비유한다.
- TCP와 달리 3 way handshake 를 하지 않아 연결, 데이터 순서, 데이터 도착에 대한 보장을 하지 않는다.
- 데이터 전달과 순서가 보장되지 않는 대신 속도가 빠르다.
- IP와 거의 같지만, `PORT` 와 체크섬 정도만 추가되었다.
- 애플리케이션에서 추가 작업이 필요하다.

TCP는 3way handshake를 거치면서 신뢰할수 있는 정보를 보내기 때문에 안전하지만, 내가 원하는대로 최적화나 속도 개선이 어려울수 있다. 만약 더 최적화시키고 싶다면 tcp를 그대로 사용하면서 udp를 활용해서 개선을 할 수 있다.

## PORT

**같은 IP 내에서 프로세스를 구분** 할 수 있도록 하는게 `PORT` 이다.

만약 한번에 두개의 PC를 연결해야 한다면? 가령 게임을 하면서 화상통화를 해야 할때 클라이언트 PC가 여러개의 서버랑 통신을 해야한다. 하지만 IP 주소만으로는 어떤 서버에 요청을 보낸건지 알기가 어렵기 때문에 PORT로 구분하는 것이다.

![image](https://github.com/jellyjw/HTTP-/assets/104891203/b1eda0eb-6baa-4e30-9237-497efc494ee8)


서버에서 내 IP주소뿐만 아니라 `PORT` 까지 알수 있는 이유는, 위에서 언급한 TCP 패킷에 출발지와 목적지 PORT까지 포함되어 전송되기 때문이다.

<aside>
💡 `IP` 가 아파트라면, `PORT` 는 몇동 몇호 로 이해하자.

</aside>

대표적으로 우리가 알고있는 포트로는

- HTTP - 80
- HTTPS - 443 등이 있다.

## DNS(Domain Name System)

`100.100.1` 처럼 숫자로 이루어진 IP 주소를 일일히 기억하기란 쉽지 않다. 그래서 DNS 서버를 통해서 도메인을 등록하고 해당 도메인으로 IP주소를 찾을수 있게 된다.

또한 IP 주소는 변경될 가능성이 있다. 만약 IP 주소가 변경되었을 경우 도메인은 유지하면서 DNS 서버의 IP만 바꿔주면 다시 해당 도메인으로 접근이 가능한 것이다. 전화번호부와 비슷한 개념으로 생각하면 된다.
